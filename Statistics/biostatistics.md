# เอกสารประกอบการสอน
## รายวิชาการจัดการข้อมูลด้วยคอมพิวเตอร์ (MTID204)

## เรื่องชีวสถิติเบื้องต้น (Basic Biostatistics)

โดยอาจารย์ ดร.ลิขิต ปรียานนท์

ปรับปรุงวันที่ 28/4/63

---

## ค่าเฉลี่ยและการกระจายตัวของข้อมูล

ค่า **mean** หาได้จากสมการ

$\mu = \sum_{i=1}^{n} X_iP(X_i)$

ค่า **standard deviation** สามารถหาได้จากสมการ

$\sigma = \sqrt{\sum_{i=1}^{n}(X_i - \mu)^2P(X_i)}$


## Probability Distributions

การกระจายตัวของค่าความน่าจะเป็นแบ่งออกได้เป็นสองประเภทคือ

1. **Discrete probability distributions** (probability mass function)
สำหรับข้อมูลที่เป็นตัวเลขจำนวนเต็มเช่นการโยนเหรียญหัวก้อยจำนวนครั้งของเหตุการณ์
2. **Continous probability distributions** (probability density function)
สำหรับข้อมูลที่เป็นจำนวนจริงหรือทศนิยมเช่น ส่วนสูงและดัชนีมวลกายเป็นต้น

## Discrete Distribution

มีหลายประเภทเช่น

### Binomial Distribution

$P(X = x|n, p) = \frac{n!}{x!(n-x)!}p^x(1-p)^{n-x}$

ค่า **mean** และ **standard deviation** หาได้จากสมการ

$\mu = np$

$\sigma = \sqrt{np(1-p)}$

### Poisson Distribution

$P(X = x|\lambda) = \frac{e^{-\lambda}\lambda^x}{x!}$

ค่า population mean หาได้จาก

$\mu = \lambda$

ค่า standard deviation หาได้จาก

$\sigma = \sqrt{\lambda}$

---

### Continuous Distributions

หรือเรียกอย่างว่า probability density functions สำหรับข้อมูลที่เป็น continuous data เช่น ส่วนสูง น้ำหนักและอุณหภูมิเป็นต้น

ความน่าจะเป็นของ continuous distributions จะคำนวณเป็นช่วงของข้อมูลมากกว่าค่าใดค่าหนึ่ง ซึ่งความน่าจะเป็นหมายถึงโอกาสที่ค่าที่วัดได้จะอยู่ในช่วงใดช่วงหนึ่ง

ความน่าจะเป็นทั้งหมดคือ 1 หาได้จากค่าพื้นที่ใต้กราฟของ continuous distribution plot

continuous distribution มีหลายแบบและแต่ละแบบมีค่าพารามิเตอร์แตกต่างกัน continuous distribution ที่รู้จักกันมากที่สุดคือ normal distribution

### Normal Distribution

normal distribution หรือเรียกว่าการกระจายตัวแบบระฆังคว่ำ (bell curve) มีประโยชน์มากเนื่องจากสามารถโมเดลข้อมูลในธรรมชาติได้มากเช่น ส่วนสูง ความดันโลหิต ค่า IQ score เป็นต้น

สมการของการกระจายตัวแบบ normal distribution คือ

$f_{\mu,\sigma}(x)=\frac{1}{\sigma\sqrt{2\pi}}e^{-(x-\mu)^2/2\sigma^2}$

ดังนั้นรูปร่างของการกระจายตัวขึ้นกับพารามิเตอร์สองตัวคือ $\mu$ และ $\sigma$ ซึ่งคือค่า mean และ standard deviation ตามลำดับ

คุณลักษณะสำคัญของการกระจายตัวแบบ normal distribution

1. การกระจายตัวเป็นแบบสมมาตร
2. ค่า mean, median และ mode เท่ากัน
3. ครึ่งหนึ่งของข้อมูลมีค่าต่ำกว่าค่าเฉลี่ยและอีกครึ่งหนึ่งสูงกว่าค่าเฉลี่ย
4. สามารถคำนวณหาสัดส่วนของประชากรที่มีค่าต่างจากค่ากลางได้ด้วยสูตร 68-95-99.7 (empirical rule)

รูปที่ 1 แสดงการกระจายตัวแบบ normal distribution ของความน่าจะเป็นในการส่งพิซซ่าของบริษัทที่ 1

![normal distribution](pizza-norm.png)

จากรูปจะเห็นได้ว่าค่าเฉลี่ยของการส่งพิซซ่าคือ 30 นาทีและ 68% ของการส่งใช้เวลาในช่วงประมาณ 25-35 นาที ($\pm 1SD$) และ 95% ของการส่งทั้งหมดอยู่ใช้เวลาประมาณ 20-40 นาที ($\pm 2SD$)

รูปที่ 2 แสดงการกระจายตัวแบบ normal distribution ของความน่าจะเป็นในการส่งพิซซ่าของบริษัทที่ 2

![normal distribution](pizza-norm2.png)

จากรูปที่ 2 จะสังเกตได้ว่าการกระจายตัวแบบ normal distribution มีความแตกต่างจากรูปที่ 1 เนื่องจากค่า $mean$ และค่า $SD$ ที่แตกต่างกัน

### Standard Normal Distribution

standard normal distribution เป็น normal distribution ชนิดพิเศษเนื่องจากมีค่า $mean=0$ และค่า $SD=1.0$ standard normal distribution เรียกอีกอย่างหนึ่งว่า Z-distribution และค่าบน Z-distribution เรียกว่า Z-score หรือ standard score หมายถึงค่าที่อยู่เหนือหรือต่ำกว่าค่า mean เช่น Z-score 1.5 หมายความถึงค่านั้นมากกว่าค่าเฉลี่ย 1.5 standard deviation หากค่า standard score ติดลบ หมายถึงค่านั้นต่ำกว่าค่าเฉลี่ย ซึ่งค่าเฉลี่ยของ standard distribution มีค่าเท่ากับ 0 ดังแสดงในรูปที่ 3

รูปที่ 3 แสดงกราฟ standard normal distribution

![standard normal distribution](stdnorm.png)

เราสามารถคำนวณค่า standard score ได้จากสูตร

$Z=\frac{X-\mu}{\sigma}$

ความสำคัญของ normal distribution

1. การทดสอบทางสถิติหลายวิธีใช้สมมติฐานว่าข้อมูลมีการกระจายตัวแบบ normal distribution
2. สมการถดถอยใช้สมมติฐานว่าค่า residuals มีการกระจายตัวแบบ normal distribution
3. ทฤษฎี central limit theorem ระบุว่าเมื่อจำนวนตัวอย่าง (sample size) เพิ่มขึ้น ค่าการกระจายตัวของ sample mean เข้าใกล้ normal distribution

Excel มีฟังก์ชั่น ```NORM.DIST()``` สำหรับ normal distribution และ ```NORM.S.DIST()``` สำหรับ Z-distribution หรือ standard normal distribution

โดยมีค่าพารามิเตอร์คือ

```Excel
NORM.DIST(sample,mean,SD,cumulative)
```

สมมติว่าค่า HDL มีการกระจายตัวแบบ normal distribution โดยมีค่า $mean=54.3$ ค่า $SD=15$ เราสามารถหาค่าความน่าจะเป็นที่คนจะมีค่า HDL = 60 mg/dL ดังนี้

```Excel
NORM.DIST(60,54.3,15,0)
```
คำตอบคือความน่าจะเป็นเท่ากับ 0.024 หรือ 2.4% ที่คนจะมีค่า HDL=60 mg/dL 

หากเราต้องการหาความน่าจะเป็นที่คนมีโอกาสมีค่า HDL = 0-60 mg/dL สามารถคำนวณแบบ cumulative ดังนี้


```Excel
NORM.DIST(60,54.3,15,1)
```

คำตอบคือความน่าจะเป็นเท่ากับ 0.648 หรือ 64.8% ที่คนจะมีค่าตั้งแต่ 0-60 mg/dL

## Inferential Statistics

เนื่องจากเราไม่สามารถหาค่าทางสถิติแท้จริงของประชากร (population) เช่นค่าเฉลี่ยหรือค่า $SD$ ได้ เราจึงใช้ค่าทางสถิติของตัวอย่างในการประมาณซึ่งความแม่นยำของการประมาณขึ้นกับกระบวนการสุ่มเลือกตัวอย่างและจำนวนตัวอย่างที่มากพอ

การประมาณ (estimate) มีสองแบบคือ

1. point estimation เช่นการประมาณค่า mean ของประชากร การคาดคะเนค่าแบบนี้เกิดความผิดพลาดได้มาก
2. interval estimation การหาช่วงที่น่าจะครอบคลุมค่าจริงของประชากร

## Central Limit Theorem

central limit theorem คือปรากฏการณ์ที่เกิดเมื่อเราสุ่มเก็บตัวอย่างและหาค่าเฉลี่ยของกลุ่มตัวอย่างหลายๆ ครั้งและเมื่อนำค่าเฉลี่ยทั้งหมดมาสร้าง histogram จะมีการกระจายตัวใกล้เคียงกับ normal distribution ไม่ว่าการกระจายตัวของค่านั้นเดิมเป็นเช่นไร

รูปที่ 4 แสดงค่าการกระจายตัวของ sample mean เมื่อทำการสุ่มเก็บตัวอย่างจำนวน 20 คน 10 ครั้ง
![10s,20n](income-hist-11s.png)

รูปที่ 5 แสดงค่าการกระจายตัวของ sample mean เมื่อทำการสุ่มเก็บตัวอย่างจำนวน 20 คน 100 ครั้ง

![100s,20n](income-hist-101s.png)

รูปที่ 6 แสดงค่าการกระจายตัวของ sample mean เมื่อทำการสุ่มเก็บตัวอย่างจำนวน 20 คน 1000 ครั้ง

![1000s,20n](income-hist-1001s.png)

รูปที่ 7 แสดง histogram ของรายได้ของนักศึกษาทั้งหมด

![incom-hist](income-hist.png)

รูปที่ 8 แสดง histogram ของค่า sample mean จากข้อมูลที่มีขนาดตัวอย่าง 20 คน (เหลือง) และ 60 คน (ฟ้า) จากการสุ่มจำนวน 2000 ครั้ง

![hist-compare](income-hist-compare.png)

จากรูปที่ 8 จะพบว่าค่า $SD$ ของค่า sample mean ลดลงเมื่อจำนวนตัวอย่างเพิ่มมากขึ้น แสดงว่าค่า estimate ของค่า mean ของประชากรมีโอกาสที่จะถูกต้องมากยิ่งขึ้น ในทางกลับกันหากจำนวนตัวอย่างน้อย ค่า $SD$ ของข้อมูลจะกว้าง ความผิดพลาดก็จะมากขึ้น

### Standard Error

Standard error หมายถึงค่าที่บ่งบอกถึงความคลาดเคลื่อนในการประมาณค่าทางสถิติเช่นค่า mean ของ population จากตัวอย่าง ซึ่งสามารถคำนวณได้จากสูตรคือ

$SE = \frac{s}{\sqrt{n}}$

โดย $s$ คือ standard deviation และ $n$ คือขนาดของตัวอย่าง ดังนั้นเมื่อขนาดของตัวอย่างเพิ่มขึ้น ความคลาดเคลื่อนในการประมาณค่า mean จะลดลงซึ่งความสัมพันธ์นี้เรียกว่า _square-root of n rule_ ซึ่งการที่จะลดค่า $SE$ ลง 2 เท่าต้องเพิ่มขนาดของตัวอย่าง 4 เท่า

    ระวังอย่าสับสนระหว่าง Standard Deviation กับ Standard Error ค่า Standard Deviation บ่งบอกถึงการกระจายตัวของข้อมูลในตัวอย่างหรือจากประชากร แต่ Standard Error บ่งบอกความคลาดเคลื่อนของการประมาณค่าทางสถิติเช่นค่าเฉลี่ยของประชากรจากข้อมูลตัวอย่าง

## Hypothesis Testing

การทดสอบสมมติฐานทางสถิติมีแนวทางดังนี้

1. สร้างสมมติฐานที่สามารถพิสูจน์ได้
2. กำหนด _null hypothesis_
3. ตัดสินใจเลือกใช้การทดสอบทางสถิติ เก็บข้อมูลและคำนวณ
4. แปลและสรุปผล


สมมติว่าบริษัทยาแห่งหนึ่งต้องการทดสอบประสิทธิภาพของยาลดความดันโลหิตว่าดีกว่ายาที่ใช้ในปัจจุบันในผู้ป่วยที่มีคุณลักษณะคล้ายกัน เราสามารถตั้งสมมติฐานได้ว่าผู้ป่วยที่ได้รับการรักษาด้วยยาชนิดใหม่ (drug X) มีความดันโลหิตลดลงมากกว่าผู้ป่วยที่รักษาด้วยยาเดิม (drug Y) หากเรากำหนดให้ $\mu_{1}$ แทนค่าเฉลี่ยของความดันโลหิตที่ลดลงของผู้ป่วยที่ใช้ยา X และ $\mu_{2}$ แทนค่าความดันโลหิตที่ลดลงของผู้ป่วยที่ใช้ยา Y เราสามารถกำหนด null hypothesis ได้ดังนี้

$H_{0}: \mu_{1}\le\mu_{2}$

ดังนั้น alternative hypothesis ($H_{A}$ หรือ $H_{1}$) คือ

$H_{A}: \mu_{1}\gt\mu_{2}$


    null hypothesis และ alternative hypothesis ต้องเป็นแบบ mutually exclusive เท่านั้นคือไม่มีส่วนที่ซ้อนทับกัน เป็นได้อย่างได้อย่างหนึ่ง และผลลัพธ์ต้องเป็นแค่สองสมมติฐานนี้เท่านั้นไม่มีอย่างอื่น (exhaustive)

จากตัวอย่างนี้เราระบุว่าการจะปฏิเสธ (reject) null hypothesis นั้นค่า $\mu_{1}$ ต้องมากกว่าค่า $\mu_{2}$ เท่านั้น ซึ่งในกรณีนี้เราเรียก alternative hypothesis ว่าเป็นแบบ **_single-tailed_**

หากในอีกกรณีหนึ่งเราต้องการทดสอบแค่ว่าค่าการลดลงของความดันโลหิตในสองกลุ่มนั้นต่างกัน ไม่ว่ามากกว่าหรือน้อยกว่า เราจะตั้งสมมติฐานดังนี้


$H_{0}: \mu_{1}=\mu_{2}$

$H_{A}: \mu_{1}\ne\mu_{2}$

ซึ่งในกรณีนี้ alternative hypothesis จะเป็นแบบ **_two-tailed_** ซึ่งพบได้บ่อยในการทดสอบทางสถิติ

หลังจากการทดสอบจากการคำนวณจากข้อมูลที่รวบรวมได้แล้วเราสามารถตัดสินใจได้สองอย่างคือ

1. ปฏิเสธ null hypothesis
2. ไม่สามารถปฏิเสธ null hypothesis ได้

การที่เราไม่สามารถปฏิเสธ null hypothesis ได้นั้นไม่ใช่ว่า null hypothesis เป็นจริงหากแต่ว่าการศึกษาของเราไม่สามารถปฏิเสธได้เท่านั้น และโดยทั่วไปการที่เราปฏิเสธ null hypothesis นั้นก็ต่อเมื่อเราพบว่าความแตกต่างของค่าที่เราเปรียบเทียบนั้นมีนัยสำคัญทางสถิติหรือ **_statistically significant_** หรืออีกนัยหนึ่งคือผลที่ได้นั้นไม่ได้เกิดจากความบังเอิญ (randomness) ซึ่งก่อนการทดสอบทางสถิติเราควรจะกำหนดค่าระดับความน่าจะเป็นหรือ _p-value_ ที่ใช้เป็นตัวกำหนดการปฏิเสธ null hypothesis ซึ่งเรามักจะเห็นว่าเป็นค่า $p\lt0.05$ โดยทั่วไป ทั้งนี้เราอาจจะพบค่า p-value อื่นเช่น $p\lt0.01$ หรือ $p\lt0.001$ ได้เช่นกัน

การทดสอบทางสถิตินั้นเป็นหลักการที่อาศัยความน่าจะเป็นดังนั้นย่อมมีโอกาสที่จะผิดพลาด ซึ่งนักสถิติได้แบ่งออกเป็นสองแบบคือ

||||True state of population |
| --- | --- | --- | --- |
||| $H_{0}$ true | $H_{A}$ true |
|Decision based on sample statistics|Fail to reject $H_{0}$| Correct desicion: $H_{0}$ true and $H_{0}$ not rejected | Type II error or $\beta$
||Reject $H_{0}$|Type I error or $\alpha$|Correct decision:$H_{0}$ false and $H_{0}$ rejected|

การที่เรากำหนดค่า $\alpha=0.05$ หมายถึงเรายอมรับว่ามีความน่าจะเป็นร้อยละ 5% ที่จะเกิดความผิดพลาดเพราะเราปฏิเสธ $H_{0}$ ในขณะที่เราไม่สามารถจะปฏิเสธ $H_{0}$ ได้ (failed to reject $H_{0}$) 

#### ตัวอย่าง

สมมติเราต้องการทดสอบสมมติฐานว่าเหรียญที่มีสองด้านเป็นเหรียญที่มีมาตรฐานหรือไม่ หมายความว่าโอกาสที่จะโยนเหรียญแต่ละครั้งแล้วได้หัวหรือก้อยคือ 0.5 หากว่าเราทดลองโยนเหรียญ 10 ครั้งแล้วพบว่าได้หัว 8 ครั้งเหรียญนี้จะได้มาตรฐานหรือไม่

#### วิธีคิด

ปัญหาข้อนี้เราสามารถเปรียบเทียบความน่าจะเป็นของการได้หัว 8/10 ครั้งได้โดยการเปรียบเทียบจากความน่าจะเป็นของการกระจายตัวแบบ binomial distribution ซึ่งเมื่อเราคำนวณแล้วพบว่าโอกาสที่จะได้หัว 8/10 ครั้งคือ 0.0439 ทั้งนี้เนื่องจากเราต้องการทดสอบว่าเหรียญได้มาตรฐานหรือไม่ดังนั้นเราสามารถคำนวณหาโอกาสที่จะได้หัวอย่างน้อย 8 ครั้งคือ 8,9 และ 10 ได้เท่ากับ 0.0439 + 0.0098 + 0.0010 = 0.0547 โดย $P(h)=0.5$ ดังนั้นในกรณีนี้เราไม่สามารถสรุปได้ว่าเหรียญไม่ได้มาตรฐานเพราะความน่าจะเป็นหรือ $p-value\gt0.05$

## The Z-Statistic

สมการคือ

$Z = \frac{\overline{x}-\mu}{\frac{\sigma}{\sqrt{n}}}$

โดยสังเกตความแตกต่างระหว่าง z-score กับ z-statistic ว่าสำหรับ z-statistic ในสูตรตัวหารจะเป็น $\frac{\sigma}{\sqrt{n}}$ หรือคือ Standard Error (SE) นั่นเองแทนที่จะเป็น $\sigma$ เหมือนอย่างในสมการคำนวณหาค่า z-score นอกจากนั้นเราอาจจะมองว่า z-score ก็คือ z-statistic ที่มี $n=1$ นั่นเองเนื่องจาก $\sqrt{1}=1$

จากสมการหากต้องการคำนวณค่า Z-Statistic เราจำเป็นต้องทราบ standard deviation ของประชากรหรือ $\sigma$ หากไม่ทราบเราต้องใช้ t-statistic แทน

#### ตัวอย่าง

สมมติเราสุ่มตัวอย่างจากประชากรที่มีค่าเฉลี่ย 50 และ SD = 10 มาสามกลุ่มโดยทั้งสามกลุ่มมีค่า $\overline{x}=52$ และจำนวนตัวอย่างคือ 30, 60, 100 ตามลำดับ จงคำนวณค่า Z-statistic

#### วิธีคิด

$Z = \frac{52-50}{\frac{10}{\sqrt{30}}} = 1.10$

$Z = \frac{52-50}{\frac{10}{\sqrt{60}}} = 1.55$

$Z = \frac{52-50}{\frac{10}{\sqrt{100}}} = 2.00$

เห็นได้ว่าขนาดตัวอย่างที่เพิ่มมากขึ้นทำให้ค่า Z-Statistic เพิ่มมากขึ้นและเมื่อคำนวณค่า p-value พบว่ามีค่าดังนี้ตามลำดับ $p=0.2713$, $p=0.1211$, $p=0.0455$ หากเราตั้งค่า $\alpha=0.05$ เราจะพบว่ามีเพียงตัวอย่างกลุ่มที่สามเท่านั้นที่ค่าน้อยกว่าค่า $\alpha$ และเราสามารถปฏิเสธ $H_{0}$ ได้

### ตัวอย่าง

ครูใหญ่โรงเรียนแห่งหนึ่งได้รับผลการทดสอบ IQ จากนักเรียนคนหนึ่ง หากครูทราบว่าผลเฉลี่ย IQ ของนักเรียนในวัยเดียวกันทั้งประเทศคือ 100 และค่า SD คือ 15 ค่าทางสถิติใดที่จะช่วยแปลผลคะแนนของนักเรียนคนนี้หากการกระจายตัวของคะแนน IQ เป็นแบบ normal distribution

### วิธีคิด

เนื่องจากเราต้องการเปรียบเทียบคะแนนของนักเรียนกับคนอื่นในประเทศซึ่งถือว่าเป็นประชากร ค่า Z-score จึงเหมาะสม ดังนี้

$Z = \frac{80-100}{15} = -1.33$

ค่าติดลบหมายความว่าค่าคะแนนของนักเรียนคนนี้อยู่ต่ำกว่าค่าเฉลี่ยเท่ากับ 1.33 เท่าของ SD ซึ่งหากคำนวณจาก normal distribution พบว่าโอกาสที่จะได้คะแนนน้อยกว่าหรือเท่ากับ 1.33 เท่าของ SD คือ $P(Z\le-1.33)=1-P(Z\gt-1.33) = 1 - (0.50000 + 0.40824) = 0.09176$

    สูตรใน Excel คือ NORM.S.DIST(-1.33, TRUE) = 0.09176

หมายความว่าโอกาสที่จะมีนักเรียนที่ได้คะแนนน้อยกว่าหรือเท่ากับ 80 คือ 9%

#### ตัวอย่าง

นักเทคนิคการแพทย์ต้องการศึกษาผลของการทานอาหารมังสะวิรัตกับค่าคลอเลสเตอรอลในเลือด หากว่าค่าคลอเลสเตอรอลในผู้ชายระหว่างอายุ 20-65 ปี มีการกระจายตัวแบบ normal distribution ด้วยค่าเฉลี่ยเท่ากับ 210 mg/dL และค่า SD = 45 mg/dL หากนักเทคนิคการแพทย์ได้ทำการเก็บตัวอย่างจำนวน 40 คนที่อยู่ในกลุ่มอายุดังกล่าวหลังจากได้ทำการติดตามการทานอาหารมาเป็นเวลาหนึ่งปีและพบว่าค่าเฉลี่ยในกลุ่มนี้คือ 190 mg/dL ค่าสถิติใดที่ควรใช้ในการแปลผลนี้

#### วิธีคิด

เนื่องจากเราวิเคราะห์ค่าที่มาจากกลุ่มตัวอย่างเพื่อเปรียบเทียบกับประชากรในกลุ่มนี้ทั้งหมด ดังนั้นจึงควรใช้ Z-Statistic ซึ่งสามารถคำนวณได้ดังนี้

$Z = \frac{190-210}{\frac{45}{\sqrt{40}}} = -2.81$

ดังนั้นค่าเฉลี่ยของกลุ่มนี้ต่ำกว่าค่าเฉลี่ยของประชากรเท่ากับ 2.81 เท่าของ SD และค่าความน่าจะเป็นคือ

$P(Z\lt-2.81) = 1 - P(Z\ge-2.81) = 1 - (0.50000 + 0.49752) = 0.00248$

เนื่องจาก $P(Z\gt2.81) = 0.00248$ เพราะว่าการกระจายแบบ normal distribution มีรูปแบบสมมาตร ดังนั้นความน่าจะเป็นคือ

$P[(Z\le-2.81)\;OR \;P(Z\ge2.81)] = 2\times(0.00248)=0.00496$

    สูตรใน Excel คือ NORM.S.DIST(-2.81, TRUE) = 0.002478

หรือเราสามารถคำนวณค่าความน่าจะเป็นของค่า z-statistic ได้จาก

    NORM.DIST(190,210,7.115,TRUE) = 0.00247

โดย $\frac{s}{\sqrt{n}}$ = $\frac{45}{\sqrt{40}} = 7.115$



เนื่องจากค่าความน่าจะเป็นที่จะได้ค่าเฉลี่ยเท่ากับ 190 mg/dL ในกลุ่มนี้น้อยกว่า 0.05 ดังนั้นเราจึงสามารถปฏิเสธ $H_{0}$ ได้ (การทานอาหารมังสวิรัตติดต่อกันไม่ทำให้เกิดความแตกต่างในระดับคอเลสเตอรอลในผู้ชายในกลุ่มอายุนี้)

### The $t$-Test

เมื่อเราไม่ทราบค่า standard deviation ของประชากรหรือ population และขนาดของตัวอย่าง (sample size) มีขนาดเล็ก เราไม่สามารถใช้คำนวณหาค่า z-statistic ได้ แต่เราสามารถคำนวณหาค่า t-statistic แทนได้ ค่า t-statistic มีการกระจายตัวคล้ายกับ normal distribution แต่ว่าด้านหางหรือ tail ของการกระจายตัวจะหนากว่า โดยลักษณะการกระจายตัวของ t-distribution จะขึ้นกับ degree of freedom ($df$) หากค่า degree of freedom มากลักษณะการกระจายตัวของ t-distribution จะใกล้เคียงกับ normal distribution

***รูปแสดงลักษณะของ t distribution***

![t-dist](t-distribution.jpg)

เราสามารถคำนวณหาค่า t-statistic ได้จากสมการ

$t = \frac{\overline{x}-\mu}{\frac{s}{\sqrt{n}}}$


โดย
* $\overline{x}$ คือค่าเฉลี่ยของตัวอย่าง
* $\mu$ คือค่าเฉลี่ยของ population
* $s$ คือค่า standard deviation
* $n$ คือขนาดตัวอย่าง

สังเกตว่าสมการนี้จะคล้ายกับการคำนวณหาค่า Z-statistic แต่ว่า t-statistic ใช้ SD ของตัวอย่างแต่ Z-statistic ใช้ SD ของประชากร ($\sigma$)


### One-Sample t-Test

หมายถึงการทดสอบค่าทางสถิติของตัวอย่างกับค่าสถิติของประชากรที่เราทราบเช่นค่าเฉลี่ย $H_{0}$ มักจะกำหนดให้ไม่มีความแตกต่างระหว่างค่าทางสถิติของกลุ่มตัวอย่างและกลุ่มประชากร

***ตัวอย่าง***

นักวิจัยสนใจศึกษาผลกระทบของการสัมผัสกับตะกั่วต่อสติปัญญาของเด็กอายุ 5 ปีในชุมชนแห่งหนึ่งในสหรัฐอเมริกาซึ่งมีค่าเฉลี่ยของระดับ IQ อยู่ที่ 100 และมีการกระจายตัวแบบ normal distribution นักวิจัยสุ่มเลือกตัวอย่างมา 15 คนที่ได้เคยสัมผัสกับตะกั่วมาก่อนซึ่งค่าเฉลี่ยของ IQ ของกลุ่มนี้คือ 90

***วิธีคิด***

เราสามารถคำนวณค่า t-statistic ได้จาก

$t = \frac{90-100}{\frac{10}{\sqrt{15}}} = -3.87$

$degree\;of\;freedom = 15 - 1 = 14$

    Two-tailed t-statistic สามารถคำนวณได้จากสูตร T.INV.2T(0.05,14) = 2.1447

ค่า upper critical value สำหรับ two-tailed $t$-test ที่มีค่า $df=14$ และ $\alpha=0.05$ คือ 2.1447 เนื่องจากค่า absolute ของ t-statistic > 2.1447 ดังนั้นเราจึงปฏิเสธ $H_{0}$ ได้และค่า t-statistic ที่ติดลบแสดงว่าค่า IQ ของกลุ่มตัวอย่างมีค่าต่ำกว่าค่าเฉลี่ย


### Confidence Interval

หมายถึง**ร้อยละ**ของช่วง confidence interval ที่หาได้จากประชากรเดียวกันซึ่งช่วงนั้นครอบคลุมค่าทางสถิติที่สนใจเช่น ค่าเฉลี่ย

ค่าร้อยละนั้นเรียกว่า _level of confidence_ ซึ่งยิ่งค่าสูงมากค่า confidence interval จะยิ่งกว้าง


![ci95](ci95.png)